---
import Layout from "../../layouts/Layout.astro";
import Section from "../../components/Section.astro";
import Container from "../../components/Container.astro";
import Heading from "../../components/Heading.astro";
import ProjectCard from "../../components/ProjectCard.astro";
import { projects } from "../../data/projects";
import { tagColors } from "../../utils/tagColors";
import { tagIcons } from "../../utils/tagIcons";
import { cn } from "../../utils/cn";
---

<Layout title="Projects">
  <Section>
    <Container class="max-w-7xl">
      <Heading level={1} class="mb-6">Projects</Heading>

      <p class="mb-8 text-lg">
        A curated selection of production-ready projects demonstrating end-to-end development skills.
      </p>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {
          projects.map((project) => (
            <ProjectCard
              title={project.title}
              description={project.description}
              href={`/projects/${project.slug}`}
              tags={project.tags}
              screenshot={project.screenshot}
            />
          ))
        }
      </div>
    </Container>
  </Section>

  <Section>
    <Container class="max-w-7xl">
      <Heading level={1} class="mb-6">Tags</Heading>

      <ul class="flex flex-wrap gap-2">
        {
          Object.keys(tagColors)
            .sort()
            .map((tag) => {
              const { light, dark, text } = tagColors[tag];
              return (
                <li
                  class={cn(
                    "inline-flex items-center gap-1.5 rounded px-3 py-1.5 font-bold text-xs",
                    light,
                    "dark:" + dark,
                    text,
                  )}
                >
                  {tagIcons[tag] &&
                    (() => {
                      const Icon = tagIcons[tag];
                      return <Icon class="w-4 h-4 text-current" />;
                    })()}
                  <span>{tag}</span>
                </li>
              );
            })
        }
      </ul>
    </Container>
  </Section>
</Layout>
