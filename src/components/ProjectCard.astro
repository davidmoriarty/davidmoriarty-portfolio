---
import { cn } from "../utils/cn";
import { tagIcons } from "../utils/tagIcons";

interface Props {
  title: string;
  description: string;
  href: string;
  tags?: string[];
  screenshots?: string[];
}

const { title, description, href, tags = [], screenshots = [] } = Astro.props;

const screenshot = screenshots[0];
const truncatedDescription = description.length > 60 ? description.slice(0, 57) + "â€¦" : description;
---

<a
  href={href}
  class={cn(
    "group relative block overflow-hidden rounded-lg border border-gray-200 dark:border-gray-700",
    "aspect-16/10",
  )}
>
  {
    screenshot && (
      <img
        src={screenshot}
        alt={`${title} screenshot`}
        class="absolute inset-0 h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"
        loading="lazy"
      />
    )
  }

  <div
    class={cn(
      "absolute inset-0 flex flex-col items-center justify-center p-4 text-center",
      "bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity duration-200",
      "backdrop-blur-sm",
    )}
  >
    <h3 class="text-white text-lg font-bold text-center">{title}</h3>
    <p class="text-sm text-white/90 text-center mt-1 max-w-prose">
      {truncatedDescription}
    </p>

    {
      tags.length > 0 && (
        <div class="mt-3 flex flex-wrap items-center justify-center gap-1 text-[10px]">
          {tags.map((tag) => {
            const Icon = tagIcons[tag];
            return (
              <span class="inline-flex items-center gap-1 rounded px-2 py-1 font-semibold text-white bg-black/40 ring-1 ring-white/15">
                {Icon && <Icon class="w-3 h-3" />}
                {tag}
              </span>
            );
          })}
        </div>
      )
    }
  </div>
</a>
